$schema: "http://json-schema.org/draft-07/schema#"
# NOTE: v1 is frozen. Any semantic change requires a new schema version.
title: obligation.crossdoc.v1
type: object
required: [version, nodes, edges]
properties:
  version:
    const: obligation.crossdoc.v1
  nodes:
    type: array
    items:
      type: object
      required: [obl_id, source_id, clause_id]
      properties:
        obl_id: {type: string}
        source_id: {type: string}
        clause_id: {type: string}
    uniqueItems: true
  edges:
    type: array
    items:
      type: object
      required: [kind, from, to, text, provenance]
      properties:
        kind:
          enum: [supersedes, conflicts_with, exception_to, applies_despite, applies_subject_to]
        from:
          type: string
        to:
          type: string
        text:
          type: string
        provenance:
          type: object
          required: [source_id, clause_id]
          properties:
            source_id: {type: string}
            clause_id: {type: string}
      additionalProperties: false
    uniqueItems: true
additionalProperties: false
